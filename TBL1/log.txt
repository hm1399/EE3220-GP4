
=== 2026-02-23 14:30 ===
操作：创建 polar_common_pkg.sv（Checkpoint 1）
文件：polar_common_pkg.sv
提示词摘要：按照 checkpoint 检查清单完成第一个任务，创建位置映射包和辅助函数
采纳内容：
  - 定义 INFO_POS[0:39] 和 FROZEN_POS[0:23] 数组
  - 实现 crc16_ccitt24 函数（CRC-16-CCITT，MSB优先，初始0x0000）
  - 实现 build_u 函数（数据/CRC → 64位u向量，注意23-k和15-k映射）
  - 实现 polar_transform64 函数（6级蝶形变换）
  - 实现 pos_tables_ok 函数（验证位置表覆盖0-63无重叠）
  - 实现 min_info_row_weight 函数（计算最小行重量=8）
修改原因：这是整个项目的基础参数包，编码器、解码器和测试平台都依赖它
---

=== 2026-02-23 14:45 ===
操作：创建 polar64_crc16_encoder.sv（Checkpoint 3）
文件：polar64_crc16_encoder.sv
提示词摘要：实现 Polar 编码器，done 在 start 后恰好第 2 个周期拉高
采纳内容：
  - 3 级流水线控制（pipe0, pipe1, done），确保 done 在 start 采样后 +2 周期
  - data_reg 在 start 时锁存 data_in，保证数据稳定
  - 组合逻辑完成 CRC→build_u→蝶形变换，结果在 pipe1 时寄存到 codeword
  - 异步低电平复位，复位时所有输出清零
修改原因：
  - 检查清单建议的 2 位移位寄存器只能实现 +1 周期延迟，与 tb_basic.sv 的时序检查不匹配
  - 通过仔细追踪 pulse_start → do_encode 的时序，确认需要 pipe0→pipe1→done 三级
  - Python 验证 ref_encode(0xABCDEF) = 0x00051313163A5830
---

=== 2026-02-23 15:30 ===
操作：修复 polar_transform64 方向错误 + 创建 polar64_crc16_decoder.sv（Checkpoint 4）
文件：polar_common_pkg.sv, polar64_crc16_decoder.sv
提示词摘要：继续完成 Checkpoint 4 实现解码器
采纳内容：
  - 发现 polar_transform64 方向错误：原来是 v[i+j] ^= v[i+j+half]（dmin=2），修正为 v[i+j+half] ^= v[i+j]（dmin=8）
  - 两个文件都受影响：polar_common_pkg.sv 中修复了 polar_transform64 函数
  - decoder 使用列 syndrome 查找表（COL_SYN[0:63]，各不相同）实现有界距离解码
  - 权重1/2/3 错误逐级搜索，找不到匹配则 correctable=0，valid=0
  - 3 级流水线（pipe0→pipe1→done），done 在 start 后 +2 周期拉高
  - Python 验证：Case A/B1/B2/B3/C/D 全部通过
修改原因：
  - checklist 的简单 syndrome 算法只在错误完全落在冻结位时才能工作
  - 实际单比特 codeword 翻转的 u-domain 投影同时跨越冻结位和信息位
  - 列 syndrome 方法：每个 codeword 位置对应唯一的冻结位 syndrome，精确匹配确定错误位置
  - transform 方向错误：v[i+j] ^= v[i+j+half] 是 F_N 转置，不能保证 dmin=8
---

=== 2026-02-23 16:00 ===
操作：Checkpoint 5 编译验证
文件：polar64_crc16_decoder.sv（修复latch），team_4_submission/run_sim.sh（新建）
提示词摘要：继续完成 Checkpoint 5 编译验证
采纳内容：
  - 发现 decoder always_comb 有 latch（syn_rem1/syn_rem2/err_pat_comb 等未在所有路径赋值）
  - 修复：在 always_comb 开头用 logic 声明并赋默认值，将临时变量内联计算
  - verilator lint-only 后：无 latch 错误，仅 TIMESCALEMOD 警告（非错误）
  - 本机无 Vivado xsim；iverilog 12 不支持 SV packed array localparam
  - Python 完整仿真（镜像 tb_basic.sv 逻辑）：SMOKE score = 30/30，所有 case 通过
  - 创建 run_sim.sh 脚本供 Vivado 环境一键运行
修改原因：
  - always_comb 中 if(!correctable) 分支里的临时赋值导致工具推断 latch
  - 修复方式：在块开头默认赋值，然后条件覆盖，满足组合逻辑完备赋值要求
---
